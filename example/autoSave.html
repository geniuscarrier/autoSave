<!DOCTYPE html>
<html lang="en">
    <head>
        <title>autoSave Demo</title>
        <link rel="stylesheet" href="css/style.css" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="js/jquery.autoSave.min.js"></script>
        <script type="text/javascript">
            $(function() {
                if (localStorage) {
                    var content = localStorage.getItem("autoSave");
                    if(content) {
                        $("#text").text(content);
                    }
                }

                $("#text").autoSave(function() {
                    var time = showTime();
                    $("#msg").text("Draft Autosaved " + time).show();
                }, 2000);

                $("#refresh").click(function() {
                    location.reload();
                });

                $("#clear").click(function() {
                    localStorage.clear();
                    location.reload();
                });

                function showTime() {
                    var timeNow = new Date();
                    var hours = timeNow.getHours();
                    var minutes = timeNow.getMinutes();
                    var seconds = timeNow.getSeconds();
                    var timeString = "" + ((hours > 12) ? hours - 12 : hours);
                    timeString += ((minutes < 10) ? ":0" : ":") + minutes;
                    timeString += ((seconds < 10) ? ":0" : ":") + seconds;
                    timeString += (hours >= 12) ? " P.M." : " A.M.";
                    return timeString;
                }
            });
        </script>
    </head>
    <body>
        <textarea id="text"></textarea>
        <div>
            <input type="button" id="clear" value="Clear autoSaved Data" />
            <input type="button" id="refresh" value="Refresh Page" />
            <span id="msg"></span>
        </div>
    </body>
</html>